
Одно из самых больших отличий нашего дизайна от других рендереров — это группы привязок пользовательской земли (наборы дескрипторов в терминологии Vulkan).

Традиционный способ — иметь отдельные привязки для каждой текстуры и буфера. Перед рисованием вы устанавливаете все привязки отдельно. Бэкэнд GFX должен объединить эти привязки в специфической для шейдера компоновке и создать соответствующие группы привязок (WebGPU), наборы дескрипторов (Vulkan), буферы аргументов (Metal) или таблицы дескрипторов (DX12). Эти объекты групп привязок являются объектами GPU и требуют больших затрат на создание. IHV рекомендуют вам предварительно создавать все объекты GPU, чтобы избежать проблем с зависаниями и фрагментацией памяти.

Обычный обходной путь — кэшировать группы привязок в хэш-карте в бэкэнде. Все привязки хэшируются, и выполняется поиск. Если группа привязок существует, то она используется повторно, а не создается. Проблема с этим подходом заключается в том, что хэширование требует больших затрат, а поиск в хэш-карте рандомизирует ваш шаблон доступа к памяти. Если вы выполняете рендеринг из нескольких потоков, вам может даже потребоваться защитить хэш группы привязки с помощью мьютекса, что сделает его еще более затратным. 

Наше решение — перенести группы привязки непосредственно в пользовательскую область: пользователь заранее создает неизменяемые группы привязки. Например, группа привязки материала содержит 5 текстур и один унифицированный буфер (заполненный данными значений). Вы получаете дескриптор, который используете для привязки материала.
