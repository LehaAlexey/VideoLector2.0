
Следующей оптимизацией с большим эффектом стала упаковка сеток. Мы выделяем большие блоки кучи по 128 МБ и имеем один дескриптор буфера платформы для каждого. Это позволяет нам легко перераспределять сетки и просто изменять базовую вершину и базовый индекс в каждом вызове отрисовки для изменения сетки. 

Таким образом, мы избавляемся от двух вызовов API: установить буфер вершин и установить буфер индекса. Мы сократили до 2-3 вызовов API на отрисовку, что очень здорово!

Эта оптимизация улучшила пропускную способность ЦП на всех устройствах. Мы увидели наибольший прирост на настольных графических процессорах (почти в 2 раза), но мобильные графические процессоры также показали заметный прирост (30%-40%).
